#!/usr/bin/env python
# -*- coding:utf-8 -*-



__author__ = 'pulin'

import unittest
import logging
import views


class TestViews(unittest.TestCase):
    def setUp(self):
        logging.info('init by setUp...')

    def tearDown(self):
        logging.info( 'end by tearDown...')

    def test_addMessage(self):
        messageinfo =  views.MessageInfo()
        messageinfo.addMessage(True,1,'处理成功！')
        self.assertTrue(messageinfo.isSuccess(),'第一次加载失败！')
        self.assertDictEqual({1:'处理成功！'},messageinfo.getMessage(),'数据不对！')
        messageinfo.addMessage(False,2,'失败！')
        self.assertFalse(messageinfo.isSuccess(), '第二次加载失败！')
        messageinfo.addMessage(True, 3, '成功！')
        self.assertFalse(messageinfo.isSuccess(), '第三次加载失败！')
        self.assertDictEqual({1: '处理成功！',2:'失败！', 3:'成功！'}, messageinfo.getMessage(), '数据不对！')

    def test_dealLine(self):
        _line = ['2.01604E+13', '\xbc\xce\xd0\xcb\xbd\xdc\xc1\xe2', '', '101128', '0', '', '101128', '0', '101128', '', '\xd2\xd1\xd6\xa7\xb8\xb6', '', '\xcb\xef\xec\xcf\xc3\xf7', '\xd5\xe3\xbd\xad\xca\xa1\xbc\xce\xd0\xcb\xca\xd0\xc4\xcf\xba\xfe\xc7\xf8\xb8\xbb\xc8\xf3\xc2\xb7171\xba\xc5(100000)', '9', '', '13736433201', '2016/4/25 10:20', '2016/4/25 10:20', '\xb6\xab\xd6\xa5\xbd\xf8\xbf\xda\xcd\xa8\xd3\xc3\xca\xd2\xc4\xda\xbb\xfa\xa3\xa8\xb2\xbb\xb4\xf8\xb1\xc3SD\xa3\xa9 (MMD-AP0124SH-C)(4),\xb6\xab\xd6\xa5\xbd\xf8\xbf\xda\xcd\xa8\xd3\xc3\xca\xd2\xc4\xda\xbb\xfa\xa3\xa8\xb2\xbb\xb4\xf8\xb1\xc3SD\xa3\xa9 (MMD-AP0184SH-C)(3),\xb6\xab\xd6\xa5\xbd\xf8\xbf\xda\xcd\xa8\xd3\xc3\xca\xd2\xc4\xda\xbb\xfa\xa3\xa8\xb2\xbb\xb4\xf8\xb1\xc3SD\xa3\xa9 (MMD-AP0244SH-C)(1),\xb6\xab\xd6\xa5\xbd\xf8\xbf\xda\xcd\xa8\xd3\xc3\xca\xd2\xc4\xda\xbb\xfa\xa3\xa8\xb2\xbb\xb4\xf8\xb1\xc3SD\xa3\xa9 (MMD-AP0094SH-C)(2),\xb6\xab\xd6\xa5\xbd\xf8\xbf\xda\xcd\xa8\xd3\xc3\xca\xd2\xc4\xda\xbb\xfa\xa3\xa8\xb2\xbb\xb4\xf8\xb1\xc3SD\xa3\xa9 (MMD-AP0154SH-C)(1),\xb6\xab\xd6\xa5Mini\xcd\xa8\xd3\xc3\xca\xd2\xc4\xda\xbb\xfa\xa3\xa8\xb2\xbb\xb4\xf8\xb1\xc3\xa3\xa9 (MMD-AP0246MHY-C)(1),\xb6\xab\xd6\xa5Mini\xcd\xa8\xd3\xc3\xca\xd2\xc4\xda\xbb\xfa\xa3\xa8\xb2\xbb\xb4\xf8\xb1\xc3\xa3\xa9 (MMD-AP0096MHY-C)(1),\xb6\xab\xd6\xa5Mini\xcd\xa8\xd3\xc3\xca\xd2\xc4\xda\xbb\xfa\xa3\xa8\xb2\xbb\xb4\xf8\xb1\xc3\xa3\xa9 (MMD-AP0156MHY-C)(1),\xb6\xab\xd6\xa5Mini\xcd\xa8\xd3\xc3\xca\xd2\xc4\xda\xbb\xfa\xa3\xa8\xb2\xbb\xb4\xf8\xb1\xc3\xa3\xa9 (MMD-AP0186MHY-C)(2),\xb6\xab\xd6\xa5Mini\xbc\xd2\xd3\xc3\xca\xd2\xcd\xe2\xbb\xfa (MCY-MAP0601HT-C)(3),\xb6\xab\xd6\xa5Mini\xbc\xd2\xd3\xc3\xca\xd2\xcd\xe2\xbb\xfa (MCY-MAP0804HT8-C)(1)', '', '1.60425E+12', '\xce\xef\xc1\xf7\xb7\xd1\xc1\xed\xbc\xc6\xa3\xa8\xb0\xb4\xca\xb5\xbc\xca\xc1\xa2\xb7\xbd\xca\xfd\xa3\xa9', '']
        _orders = dict()
        _messageInfo = views.MessageInfo()
        views.deal_line(_line,_orders,_messageInfo)


if __name__ == '__main__':
    unittest.main()